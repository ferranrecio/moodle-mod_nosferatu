define ("mod_nosferatu/local/starter_example",["exports","core/reactive","mod_nosferatu/events"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;function d(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function e(a){for(var b=1,c;b<arguments.length;b++){c=null!=arguments[b]?arguments[b]:{};if(b%2){d(Object(c),!0).forEach(function(b){f(a,b,c[b])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(a,Object.getOwnPropertyDescriptors(c))}else{d(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}}return a}function f(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function g(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){g=function(a){return typeof a}}else{g=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return g(a)}function h(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function i(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function j(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);return a}function k(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});if(b)l(a,b)}function l(a,b){l=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return l(a,b)}function m(a){return function(){var b=q(a),c;if(p()){var d=q(this).constructor;c=Reflect.construct(b,arguments,d)}else{c=b.apply(this,arguments)}return n(this,c)}}function n(a,b){if(b&&("object"===g(b)||"function"==typeof b)){return b}return o(a)}function o(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(a){return!1}}function q(a){q=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return q(a)}var r=[];a.init=function init(a){var b=document.getElementById(a);r.forEach(function(a){return a(b)})};var s=new b.Reactive({name:"mod_nosferatu_city",eventName:c.eventTypes.modNosferatuStateUpdated,eventDispatch:c.notifyModNosferatuStateUpdated,state:{people:[{id:1,name:"Carlos",bitten:!1},{id:2,name:"Amaia",bitten:!1},{id:3,name:"Sara",bitten:!1},{id:4,name:"Ilya",bitten:!0},{id:5,name:"Ferran",bitten:!1}]}}),t=function(a){k(b,a);var c=m(b);function b(){h(this,b);return c.apply(this,arguments)}j(b,[{key:"create",value:function create(){this.name="CitizenList";this.selectors={PERSON:"[data-for='person']",PERSONNAME:"[data-for='personname']"};this.classes={BITTEN:"bitten"}}},{key:"stateReady",value:function stateReady(a){var b=this;a.people.forEach(function(a){b._refreshPerson({element:a})})}},{key:"getWatchers",value:function getWatchers(){return[{watch:"people:updated",handler:this._refreshPerson}]}},{key:"_refreshPerson",value:function _refreshPerson(a){var b,c=a.element,d=this.getElement(this.selectors.PERSON,c.id);d.classList.toggle(this.classes.BITTEN,null!==(b=c.bitten)&&void 0!==b?b:!1);var e=d.querySelector(this.selectors.PERSONNAME);e.innerHTML=c.name}}]);return b}(b.BaseComponent);r.push(function(a){new t({element:a,reactive:s})});var u=function(){function a(){h(this,a)}j(a,[{key:"bite",value:function bite(a,b){var c=a.state;a.setReadOnly(!1);c.people.get(b).bitten=!0;a.setReadOnly(!0)}}]);return a}();s.setMutations(new u);var v=function(a){k(b,a);var c=m(b);function b(){h(this,b);return c.apply(this,arguments)}j(b,[{key:"create",value:function create(){this.name="vampire";this.selectors={PERSON:"select",SUBMIT:"button"}}},{key:"stateReady",value:function stateReady(){this.addEventListener(this.getElement(this.selectors.SUBMIT),"click",this._bitePersonListener)}},{key:"_bitePersonListener",value:function _bitePersonListener(a){a.preventDefault();var b=this.getElement(this.selectors.PERSON),c=b.value;this.reactive.dispatch("bite",c)}}]);return b}(b.BaseComponent);r.push(function(a){new v({element:a.querySelector("[data-for='vampire']")})});var w=function(a){k(b,a);var c=m(b);function b(){h(this,b);return c.apply(this,arguments)}j(b,[{key:"cureAll",value:function cureAll(a){var b=this.callCureAll(a.state);a.processUpdates(b)}},{key:"callCureAll",value:function callCureAll(a){var b=[];a.people.forEach(function(a){b.push({name:"people",action:"update",fields:e({},a,{bitten:!1})})});return b}}]);return b}(u);s.setMutations(new w);var x=function(a){k(b,a);var c=m(b);function b(){h(this,b);return c.apply(this,arguments)}j(b,[{key:"create",value:function create(){this.name="doctor";this.selectors={SUBMIT:"button"}}},{key:"stateReady",value:function stateReady(){this.addEventListener(this.getElement(),"click",this._cureAllCitizens)}},{key:"_cureAllCitizens",value:function _cureAllCitizens(a){a.preventDefault();this.reactive.dispatch("cureAll")}}]);return b}(b.BaseComponent);r.push(function(a){new x({element:a.querySelector("[data-for='doctor']")})})});
//# sourceMappingURL=starter_example.min.js.map
