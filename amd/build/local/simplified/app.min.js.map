{"version":3,"file":"app.min.js","sources":["../../../src/local/simplified/app.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport {Reactive} from 'core/reactive';\nimport {mutations} from 'mod_nosferatu/local/simplified/mutations';\nimport {eventTypes, notifyModNosferatuStateUpdated} from 'mod_nosferatu/events';\n\n// All your reactive components will share the same reactive APP instance.\n// This file is a simple example of how a reactive APP module can be created.\n\n// This is out initial state. All components will wathc those data and react to any change.\n// For more complex aplications this state will be loaded using a webservice but, for now,\n// we will use a simple object.\nconst state = {\n    'people': [\n        {\n            // For arrays, it is important each item has an unique id.\n            // Otherwise you will get an exception.\n            id: 1,\n            name: 'Carlos',\n            bitten: false,\n        },\n        {\n            id: 2,\n            name: 'Amaia',\n            bitten: false,\n        },\n        {\n            id: 3,\n            name: 'Sara',\n            bitten: false,\n        },\n        {\n            id: 4,\n            name: 'Ilya',\n            bitten: true,\n        },\n        {\n            id: 5,\n            name: 'Ferran',\n            bitten: false,\n        },\n    ],\n    // You can add more arrays or objects in the first level, but not simple values.\n};\n\n// It is recommended to use your own reactive class extending the base one.\n// By having your own class you will be able to add global methods to you application\n// because all components will inherit the main reactive instance.\nclass Nosferatu extends Reactive {\n    /**\n     * Check is someone has been bitten.\n     *\n     * @returns {boolean}\n     */\n    isSomeoneBitten() {\n        return this.state.people.values().some((person) => person.bitten == true);\n    }\n\n    /**\n     * Check if there are people.\n     *\n     * @returns {boolean}\n     */\n    hasPeople() {\n        return this.state.people.size > 0;\n    }\n}\n\n// The reactive instance requires an event (eventNamer and eventDispatch method)\nexport const reactive = new Nosferatu({\n    name: 'mod_nosferatu_simplified',\n    eventName: eventTypes.modNosferatuStateUpdated,\n    eventDispatch: notifyModNosferatuStateUpdated,\n    state,\n    mutations,\n});\n\n/**\n * Load the initial state.\n *\n * For now the state only exists in the frontend but in more complex scenarios\n * the state data will be generated using a webservice.\n */\nexport const init = () => {\n    // In this example we don't need to set anything because it is only a frontend\n    // aplication. In future examples the initial state will be loaded asynchronous\n    // and the init method will to all the initializing work.\n};\n"],"names":["Nosferatu","Reactive","isSomeoneBitten","this","state","people","values","some","person","bitten","hasPeople","size","reactive","name","eventName","eventTypes","modNosferatuStateUpdated","eventDispatch","notifyModNosferatuStateUpdated","id","mutations"],"mappings":"gSA6DMA,kBAAkBC,mBAMpBC,yBACWC,KAAKC,MAAMC,OAAOC,SAASC,MAAMC,QAA4B,GAAjBA,OAAOC,SAQ9DC,mBACWP,KAAKC,MAAMC,OAAOM,KAAO,SAK3BC,SAAW,IAAIZ,UAAU,CAClCa,KAAM,2BACNC,UAAWC,mBAAWC,yBACtBC,cAAeC,uCACfd,MA7DU,QACA,CACN,CAGIe,GAAI,EACJN,KAAM,SACNJ,QAAQ,GAEZ,CACIU,GAAI,EACJN,KAAM,QACNJ,QAAQ,GAEZ,CACIU,GAAI,EACJN,KAAM,OACNJ,QAAQ,GAEZ,CACIU,GAAI,EACJN,KAAM,OACNJ,QAAQ,GAEZ,CACIU,GAAI,EACJN,KAAM,SACNJ,QAAQ,KAmChBW,UAAAA,gEASgB"}